{"version":3,"sources":["components/Error.js","components/LoginForm.js","components/Blog.js","components/Notification.js","components/Blogs.js","services/blogs.js","services/login.js","App.js","index.js"],"names":["Error","message","className","LoginForm","loginObj","errorMessage","handleLogin","username","password","setUsername","setPassword","onSubmit","type","value","name","onChange","target","Blog","blog","title","author","Notification","Blogs","blogs","user","handleLogout","onClick","map","id","baseUrl","token","getAll","axios","get","then","res","data","setToken","newToken","create","newObject","a","config","headers","Authorization","post","login","credentials","App","useState","setBlogs","setTitle","url","setUrl","setAuthor","setErrorMessage","setUser","useEffect","blogService","loggedUserJSON","window","localStorage","getItem","JSON","parse","event","preventDefault","loginService","setItem","stringify","setTimeout","handleTitleChange","handleAuthorChange","handleUrlChange","addBlog","blogObject","returnedBlog","concat","removeItem","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f94c4300.chunk.js","sourcesContent":["import React from 'react';\n\nconst Error = ({ message }) => {\n  if (message === null) {\n    return null;\n  }\n\n  return <h3 className='message error-message'>{message}</h3>;\n};\n\nexport default Error;\n","import React from 'react';\nimport Error from './Error';\n\nconst LoginForm = ({ loginObj, errorMessage }) => {\n  // fixme: should destructure in function params\n  const {\n    handleLogin,\n    username,\n    password,\n    setUsername,\n    setPassword,\n  } = loginObj;\n  return (\n    <div>\n      <h2>login to application</h2>\n      <Error message={errorMessage} />\n      <form onSubmit={handleLogin}>\n        <div>\n          username\n          <input\n            className='login'\n            type='text'\n            value={username}\n            name='Username'\n            onChange={({ target }) => setUsername(target.value)}\n          />\n        </div>\n        <div>\n          password\n          <input\n            className='login'\n            type='password'\n            value={password}\n            name='Password'\n            onChange={({ target }) => setPassword(target.value)}\n          />\n        </div>\n        <button type='submit'>login</button>\n      </form>\n    </div>\n  );\n};\n\nexport default LoginForm;\n","import React from 'react';\nconst Blog = ({ blog }) => (\n  <li>\n    {blog.title} {blog.author}\n  </li>\n);\n\nexport default Blog;\n","import React from 'react';\n\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null;\n  }\n\n  return <h3 className='message success-message'>{message}</h3>;\n};\n\nexport default Notification;\n","import React from 'react';\nimport Blog from './Blog';\nimport Notification from './Notification';\n\nconst Blogs = ({ blogs, user, handleLogout, errorMessage }) => {\n  return (\n    <div>\n      <h2>Blogs</h2>\n      <Notification message={errorMessage} />\n      <p className='username-p'>{user.name} logged-in</p>\n      <button onClick={handleLogout}>logout</button>\n      <ul>\n        {blogs.map((blog) => (\n          <Blog key={blog.id} blog={blog} />\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default Blogs;\n","import axios from 'axios';\n\nconst baseUrl = '/api/blogs';\nlet token = null;\n\nconst setToken = (newToken) => {\n  token = `bearer ${newToken}`;\n};\n\nconst getAll = () => {\n  const req = axios.get(baseUrl);\n  return req.then((res) => res.data);\n};\n\nconst create = async (newObject) => {\n  const config = {\n    headers: { Authorization: token },\n  };\n\n  const res = await axios.post(baseUrl, newObject, config);\n  return res.data;\n};\n\nexport default { getAll, setToken, create };\n","import axios from 'axios';\n\nconst baseUrl = '/api/login';\n\nconst login = async (credentials) => {\n  const res = await axios.post(baseUrl, credentials);\n  return res.data;\n};\n\nexport default { login };\n","import React, { useState, useEffect } from 'react';\n\nimport LoginForm from './components/LoginForm';\nimport Blogs from './components/Blogs';\n\nimport blogService from './services/blogs';\nimport loginService from './services/login';\n\nconst App = () => {\n  const [blogs, setBlogs] = useState([]);\n  const [title, setTitle] = useState('');\n  const [url, setUrl] = useState('');\n  const [author, setAuthor] = useState('');\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    blogService.getAll().then((blogs) => setBlogs(blogs));\n  }, []);\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogAppUser');\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON);\n      setUser(user);\n\n      blogService.setToken(user.token);\n    }\n  }, []);\n\n  const handleLogin = async (event) => {\n    event.preventDefault();\n\n    try {\n      const user = await loginService.login({\n        username,\n        password,\n      });\n\n      window.localStorage.setItem('loggedBlogAppUser', JSON.stringify(user));\n\n      blogService.setToken(user.token);\n\n      setUser(user);\n\n      setUsername('');\n      setPassword('');\n    } catch (exception) {\n      setErrorMessage('Wrong Username or Password');\n      setTimeout(() => {\n        setErrorMessage(null);\n      }, 5000);\n    }\n  };\n\n  const handleLogout = () => {\n    setUser(null);\n    blogService.setToken(null);\n\n    window.localStorage.removeItem('loggedBlogAppUser');\n  };\n\n  const handleTitleChange = (event) => {\n    setTitle(event.target.value);\n  };\n\n  const handleAuthorChange = (event) => {\n    setAuthor(event.target.value);\n  };\n\n  const handleUrlChange = (event) => {\n    setUrl(event.target.value);\n  };\n\n  const addBlog = async (event) => {\n    event.preventDefault();\n    const blogObject = {\n      title: title,\n      author: author || user.name,\n      url: url,\n    };\n\n    const returnedBlog = await blogService.create(blogObject);\n    setBlogs(blogs.concat(returnedBlog));\n\n    setErrorMessage(\n      `a new blog '${returnedBlog.title}' by ${returnedBlog.author} added`\n    );\n    setTimeout(() => {\n      setErrorMessage(null);\n    }, 5000);\n\n    setAuthor('');\n    setTitle('');\n    setUrl('');\n  };\n\n  const loginObj = {\n    handleLogin,\n    username,\n    password,\n    setUsername,\n    setPassword,\n  };\n\n  const blogForm = () => (\n    <div>\n      <h2>create new</h2>\n      <form onSubmit={addBlog}>\n        <div>\n          <p className='blog-form-label'>title:</p>\n          <input type='text' value={title} onChange={handleTitleChange} />\n        </div>\n\n        <div>\n          <p className='blog-form-label'>author:</p>\n          <input type='text' value={author} onChange={handleAuthorChange} />\n        </div>\n\n        <div>\n          <p className='blog-form-label'>url:</p>\n          <input type='text' value={url} onChange={handleUrlChange} />\n        </div>\n\n        <button type='submit'>create</button>\n      </form>\n    </div>\n  );\n\n  return (\n    <div>\n      {user === null ? (\n        <div>\n          <LoginForm loginObj={loginObj} errorMessage={errorMessage} />\n        </div>\n      ) : (\n        <div>\n          <Blogs\n            blogs={blogs}\n            user={user}\n            handleLogout={handleLogout}\n            errorMessage={errorMessage}\n          />\n          {blogForm()}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}