(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{102:function(e,t,n){},103:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(11),c=n.n(a),o=n(8),s=n.n(o),i=n(13),u=n(15),l=n(3),d=function(e){var t=e.message;return null===t?null:Object(l.jsx)("h3",{className:"message error-message",children:t})},j=n(151),b=n(152),p=n(144),f=n(142),h=n(139),m=Object(h.a)({loginBtn:{marginTop:"0.8rem"}}),g=function(e){var t=e.login,n=e.errorMessage,a=Object(r.useState)("root"),c=Object(u.a)(a,2),o=c[0],h=c[1],g=Object(r.useState)("sekret"),O=Object(u.a)(g,2),v=O[0],x=O[1],y=function(){var e=Object(i.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t(o,v),h(""),x("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=m();return Object(l.jsxs)(f.a,{style:{marginTop:"15%"},alignContent:"center",direction:"column",container:!0,children:[Object(l.jsx)(p.a,{variant:"h4",component:"h2",gutterBottom:!0,children:"login to application"}),Object(l.jsx)(d,{message:n}),Object(l.jsxs)("form",{onSubmit:y,children:[Object(l.jsx)("div",{children:Object(l.jsx)(j.a,{label:"username",value:o,onChange:function(e){var t=e.target;return h(t.value)}})}),Object(l.jsx)("div",{children:Object(l.jsx)(j.a,{label:"password",type:"password",value:v,onChange:function(e){var t=e.target;return x(t.value)}})}),Object(l.jsx)(b.a,{type:"submit",className:w.loginBtn,color:"primary",children:"login"})]})]})},O=n(20),v=n.n(O),x={getUserById:function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat("/api/users","/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y=n(146),w=n(147),k=n(145),B=n(66),S=n.n(B),N=n(65),C=n.n(N),T=Object(h.a)({gutterBottom:{marginBottom:"0.8rem"},content:{marginTop:"1.2rem",MarginBottom:"1.2rem"},links:{textDecoration:"none",color:"#636363","&:hover":{color:"black"}},smallMarginBottom:{marginBottom:"0.2rem"},deleteBtn:{marginTop:"0.6rem"}}),I=function(e){var t=e.blog,n=e.updateBlog,a=e.removeBlog,c=Object(r.useState)(!1),o=Object(u.a)(c,2),s=o[0],i=o[1],d={display:s?"":"none"},j=null,f=function(){i(!s)},h=function(){var e={user:t.user,likes:t.likes+1,author:t.author,title:t.title,url:t.url,id:t.id};n(e)},m=function(){console.log("i feel like this button hasnt been implemented yet")},g=function(){window.confirm("remove blog '".concat(t.title,"' by ").concat(t.author,"?"))&&a(t)};Object.keys(t).includes("user")&&(j=x.getUserById(t.user).username);var O=function(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(p.a,{variant:"h5",onClick:f,className:"blog-title",children:t.title}),Object(l.jsxs)(k.a,{children:[Object(l.jsxs)(b.a,{size:"small",onClick:h,color:"primary",children:[Object(l.jsx)(C.a,{fontSize:"small"}),t.likes]}),Object(l.jsxs)(b.a,{size:"small",onClick:m,color:"secondary",children:[Object(l.jsx)(S.a,{fontSize:"small"}),"0"]})]})]})},v=function(){return Object(l.jsxs)("div",{style:d,className:B.content,children:[Object(l.jsx)(p.a,{variant:"body1",children:Object(l.jsx)("a",{href:t.url,className:(B.marginBottom,B.links),children:"read more"})}),Object(l.jsxs)(p.a,{variant:"body1",color:"textPrimary",children:["Posted by ",t.author||j]}),Object(l.jsx)(b.a,{onClick:g,color:"secondary",variant:"contained",className:B.deleteBtn,children:"delete"})]})},B=T();return Object(l.jsx)(y.a,{className:B.gutterBottom,raised:!0,children:Object(l.jsxs)(w.a,{children:[Object(l.jsx)(O,{}),Object(l.jsx)(v,{})]})})},A=function(e){var t=e.message;return null===t?null:Object(l.jsx)("h3",{className:"message success-message",children:t})},z=n(148),M=function(e){var t=e.blogs,n=e.errorMessage,r=e.updateBlog,a=e.removeBlog;return Object(l.jsxs)(z.a,{maxWidth:"md",children:[Object(l.jsx)(A,{message:n}),Object(l.jsx)("ul",{children:t.map((function(e){return Object(l.jsx)(I,{blog:e,updateBlog:r,removeBlog:a},e.id)}))})]})},U="/api/blogs",E=null,J={getAll:function(){return v.a.get(U).then((function(e){return e.data}))},setToken:function(e){E="bearer ".concat(e)},create:function(){var e=Object(i.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:E}},e.next=3,v.a.post(U,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(i.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:E}},e.next=3,v.a.put("".concat(U,"/").concat(t.id),t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteById:function(){var e=Object(i.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:E}},e.next=3,v.a.delete("".concat(U,"/").concat(t),n);case 3:return r=e.sent,e.abrupt("return",r.status);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},D={login:function(){var e=Object(i.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},L=n(149),P=n(150),W=function(e){var t=e.createBlog,n=Object(r.useState)(""),a=Object(u.a)(n,2),c=a[0],o=a[1],d=Object(r.useState)(""),j=Object(u.a)(d,2),b=j[0],p=j[1],h=Object(r.useState)(""),m=Object(u.a)(h,2),g=m[0],O=m[1],v=function(){var e=Object(i.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t({title:c,author:b,url:g}),p(""),o(""),O("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsxs)("div",{id:"form",className:"hidden",children:[Object(l.jsx)("h2",{style:{textAlign:"center"},children:"create new"}),Object(l.jsx)(f.a,{justify:"center",container:!0,children:Object(l.jsxs)("form",{onSubmit:v,children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{className:"blog-form-label",children:"title:"}),Object(l.jsx)("input",{id:"title-input",type:"text",value:c,onChange:function(e){var t=e.target;return o(t.value)}})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{className:"blog-form-label",children:"author:"}),Object(l.jsx)("input",{id:"author-input",type:"text",value:b,onChange:function(e){var t=e.target;return p(t.value)}})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("p",{className:"blog-form-label",children:"url:"}),Object(l.jsx)("input",{id:"url-input",type:"text",value:g,onChange:function(e){var t=e.target;return O(t.value)}})]}),Object(l.jsx)("button",{type:"submit",id:"submit-blog-btn",children:"create"})]})})]})},F=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(null),o=Object(u.a)(c,2),d=o[0],j=o[1],p=Object(r.useState)(!1),f=Object(u.a)(p,2),h=f[0],m=f[1],O=Object(r.useState)(null),v=Object(u.a)(O,2),x=v[0],y=v[1];Object(r.useEffect)((function(){J.getAll().then((function(e){return a(e)}))}),[]),Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogAppUser");if(e){var t=JSON.parse(e);y(t),J.setToken(t.token)}}),[]);var w=function(){var e=Object(i.a)(s.a.mark((function e(t,n){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.login({username:t,password:n});case 3:r=e.sent,window.localStorage.setItem("loggedBlogAppUser",JSON.stringify(r)),J.setToken(r.token),y(r),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),j("Wrong Username or Password"),setTimeout((function(){j(null)}),5e3);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){y(null),J.setToken(null),window.localStorage.removeItem("loggedBlogAppUser")},B=function(){var e=Object(i.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return""===t.author&&(t.author=x.name),e.next=3,J.create(t);case 3:r=e.sent,a(n.concat(r)),j("a new blog '".concat(r.title,"' by ").concat(r.author," added")),setTimeout((function(){j(null)}),5e3);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(i.a)(s.a.mark((function e(t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.update(t);case 2:r=e.sent,a(n.filter((function(e){return e.id!==t.id})).concat(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(t.id),e.next=4,J.deleteById(t.id);case 4:a(n.filter((function(e){return e.id!==t.id}))),j("blog '".concat(t.title,"' was removed")),setTimeout((function(){j(null)}),5e3),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),j("failed to delete blog '".concat(t.title,"'")),setTimeout((function(){j(null)}),5e3);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsx)("div",{children:null===x?Object(l.jsx)("div",{children:Object(l.jsx)(g,{login:w,errorMessage:d})}):Object(l.jsxs)("div",{children:[Object(l.jsx)(L.a,{position:"static",children:Object(l.jsxs)(P.a,{children:[Object(l.jsx)(b.a,{color:"inherit",children:"home"}),Object(l.jsx)(b.a,{color:"inherit",onClick:function(){if(h)return document.getElementById("form").classList.add("hidden"),void m(!1);document.getElementById("form").classList.remove("hidden"),m(!0)},children:"create"}),Object(l.jsx)(b.a,{color:"inherit",children:"users"}),Object(l.jsx)(b.a,{color:"inherit",onClick:k,children:"logout"})]})}),Object(l.jsx)(W,{createBlog:B}),Object(l.jsx)(M,{blogs:n.sort((function(e,t){return t.likes-e.likes})),user:x,handleLogout:k,errorMessage:d,addBlog:B,updateBlog:S,removeBlog:N})]})})};n(102);c.a.render(Object(l.jsx)(F,{}),document.getElementById("root"))}},[[103,1,2]]]);
//# sourceMappingURL=main.3d11c2bc.chunk.js.map