(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{106:function(e,t,n){},107:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(11),c=n.n(a),s=n(8),o=n.n(s),i=n(13),l=n(16),u=n(3),d=function(e){var t=e.message;return null===t?null:Object(u.jsx)("h3",{className:"message error-message",children:t})},j=n(155),m=n(147),b=n(146),h=n(144),p=n(141),f=Object(p.a)({loginBtn:{marginTop:"0.8rem"}}),v=function(e){var t=e.login,n=e.errorMessage,a=Object(r.useState)("root"),c=Object(l.a)(a,2),s=c[0],p=c[1],v=Object(r.useState)("sekret"),O=Object(l.a)(v,2),g=O[0],x=O[1],k=function(){var e=Object(i.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t(s,g),p(""),x("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=f();return Object(u.jsxs)(h.a,{style:{marginTop:"15%"},alignContent:"center",direction:"column",container:!0,children:[Object(u.jsx)(b.a,{variant:"h4",component:"h2",gutterBottom:!0,children:"Login to Application"}),Object(u.jsx)(d,{message:n}),Object(u.jsxs)("form",{onSubmit:k,children:[Object(u.jsx)("div",{children:Object(u.jsx)(j.a,{label:"Username",value:s,onChange:function(e){var t=e.target;return p(t.value)}})}),Object(u.jsx)("div",{children:Object(u.jsx)(j.a,{label:"Password",type:"password",value:g,onChange:function(e){var t=e.target;return x(t.value)}})}),Object(u.jsx)(m.a,{type:"submit",className:y.loginBtn,color:"primary",children:"login"})]})]})},O=n(20),g=n.n(O),x={getUserById:function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat("/api/users","/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},k=n(149),y=n(150),w=n(148),B=n(67),N=n.n(B),S=n(66),C=n.n(S),T=Object(p.a)({gutterBottom:{marginBottom:"0.8rem"},content:{marginTop:"1.2rem",MarginBottom:"1.2rem"},links:{textDecoration:"none",color:"#636363","&:hover":{color:"black"}},smallMarginBottom:{marginBottom:"0.2rem"},deleteBtn:{marginTop:"0.6rem"},commentHeader:{marginTop:"0.6rem",marginBottom:"0.3rem"},comments:{marginBottom:"0.6rem"},comment:{listStyle:"disc"}}),A=function(e){var t=e.blog,n=e.updateBlog,a=e.removeBlog,c=Object(r.useState)(!1),s=Object(l.a)(c,2),o=s[0],i=s[1],d=Object(r.useState)(""),h=Object(l.a)(d,2),p=h[0],f=h[1],v={display:o?"":"none"},O=null,g=function(){i(!o)},B=function(){var e={user:t.user,likes:t.likes+1,dislikes:t.dislikes,author:t.author,title:t.title,url:t.url,id:t.id,comments:t.comments};n(e)},S=function(){var e={user:t.user,likes:t.likes,dislikes:t.dislikes+1,author:t.author,title:t.title,url:t.url,id:t.id,comments:t.comments};n(e)},A=function(){window.confirm("remove blog '".concat(t.title,"' by ").concat(t.author,"?"))&&a(t)};Object.keys(t).includes("user")&&(O=x.getUserById(t.user).username);var I=function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(b.a,{variant:"h5",onClick:g,className:"blog-title",children:t.title}),Object(u.jsxs)(w.a,{children:[Object(u.jsxs)(m.a,{size:"small",onClick:B,color:"primary",children:[Object(u.jsx)(C.a,{fontSize:"small"}),t.likes]}),Object(u.jsxs)(m.a,{size:"small",onClick:S,color:"secondary",children:[Object(u.jsx)(N.a,{fontSize:"small"}),t.dislikes]})]})]})},U=function(){return Object(u.jsxs)("div",{style:v,children:[Object(u.jsx)(b.a,{variant:"h6",className:M.commentHeader,children:"Comments"}),Object(u.jsx)("ul",{children:t.comments.map((function(e,t){return Object(u.jsx)("li",{className:M.comment,children:e},t)}))})]})},z=function(){return Object(u.jsxs)("div",{style:v,className:M.content,children:[Object(u.jsx)(b.a,{variant:"body1",children:Object(u.jsx)("a",{href:t.url,className:(M.marginBottom,M.links),children:"read more"})}),Object(u.jsxs)(b.a,{variant:"body1",color:"textPrimary",children:["Posted by ",t.author||O]}),Object(u.jsx)(m.a,{onClick:A,color:"secondary",variant:"contained",className:M.deleteBtn,children:"delete"})]})},M=T();return Object(u.jsx)(k.a,{className:M.gutterBottom,raised:!0,children:Object(u.jsxs)(y.a,{children:[Object(u.jsx)(I,{}),Object(u.jsx)(U,{}),Object(u.jsx)("form",{onSubmit:function(e){e.preventDefault();var r={user:t.user,likes:t.likes,dislikes:t.dislikes,author:t.author,title:t.title,url:t.url,id:t.id,comments:t.comments.concat(p)};n(r),f("")},style:v,children:Object(u.jsx)(j.a,{className:M.comments,label:"New Comment",type:"text",value:p,onChange:function(e){var t=e.target;return f(t.value)}})}),Object(u.jsx)(z,{})]})})},I=function(e){var t=e.message;return null===t?null:Object(u.jsx)("h3",{className:"message success-message",children:t})},U=n(151),z=function(e){var t=e.blogs,n=e.errorMessage,r=e.updateBlog,a=e.removeBlog;return Object(u.jsxs)(U.a,{maxWidth:"md",children:[Object(u.jsx)(I,{message:n}),Object(u.jsx)("ul",{className:"mt-3",children:t.map((function(e){return Object(u.jsx)(A,{blog:e,updateBlog:r,removeBlog:a},e.id)}))})]})},M="/api/blogs",E=null,D={getAll:function(){return g.a.get(M).then((function(e){return e.data}))},setToken:function(e){E="bearer ".concat(e)},create:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:E}},e.next=3,g.a.post(M,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:E}},e.next=3,g.a.put("".concat(M,"/").concat(t.id),t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteById:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:E}},e.next=3,g.a.delete("".concat(M,"/").concat(t),n);case 3:return r=e.sent,e.abrupt("return",r.status);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},J={login:function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},L=n(152),P=n(153),H=function(e){var t=e.createBlog,n=Object(r.useState)(""),a=Object(l.a)(n,2),c=a[0],s=a[1],d=Object(r.useState)(""),b=Object(l.a)(d,2),p=b[0],f=b[1],v=Object(r.useState)(""),O=Object(l.a)(v,2),g=O[0],x=O[1],k=function(){var e=Object(i.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t({title:c,author:p,url:g}),f(""),s(""),x("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{id:"form",className:"hidden",children:[Object(u.jsx)("h2",{style:{textAlign:"center"},children:"Create New"}),Object(u.jsx)(h.a,{justify:"center",container:!0,children:Object(u.jsxs)("form",{onSubmit:k,children:[Object(u.jsx)("div",{children:Object(u.jsx)(j.a,{label:"Title",type:"text",value:c,onChange:function(e){var t=e.target;return s(t.value)}})}),Object(u.jsx)("div",{children:Object(u.jsx)(j.a,{label:"Author",type:"text",value:p,onChange:function(e){var t=e.target;return f(t.value)}})}),Object(u.jsx)("div",{children:Object(u.jsx)(j.a,{label:"Url",type:"text",value:g,onChange:function(e){var t=e.target;return x(t.value)}})}),Object(u.jsx)(m.a,{type:"submit",color:"primary",children:"create"})]})})]})},W=n(68),F=n.n(W),q=n(154),G=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(null),s=Object(l.a)(c,2),d=s[0],j=s[1],h=Object(r.useState)(!1),p=Object(l.a)(h,2),f=p[0],O=p[1],g=Object(r.useState)(null),x=Object(l.a)(g,2),k=x[0],y=x[1];Object(r.useEffect)((function(){D.getAll().then((function(e){return a(e)}))}),[]),Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogAppUser");if(e){var t=JSON.parse(e);y(t),D.setToken(t.token)}}),[]);var w=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.login({username:t,password:n});case 3:r=e.sent,window.localStorage.setItem("loggedBlogAppUser",JSON.stringify(r)),D.setToken(r.token),y(r),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),j("Wrong Username or Password"),setTimeout((function(){j(null)}),5e3);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),B=function(){y(null),D.setToken(null),window.localStorage.removeItem("loggedBlogAppUser")},N=function(){var e=Object(i.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return""===t.author&&(t.author=k.name),e.next=3,D.create(t);case 3:r=e.sent,a(n.concat(r)),j("a new blog '".concat(r.title,"' by ").concat(r.author," added")),setTimeout((function(){j(null)}),5e3);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(i.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.update(t);case 2:r=e.sent,a(n.filter((function(e){return e.id!==t.id})).concat(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(t.id),e.next=4,D.deleteById(t.id);case 4:a(n.filter((function(e){return e.id!==t.id}))),j("blog '".concat(t.title,"' was removed")),setTimeout((function(){j(null)}),5e3),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),j("failed to delete blog '".concat(t.title,"'")),setTimeout((function(){j(null)}),5e3);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsx)("div",{children:null===k?Object(u.jsx)("div",{children:Object(u.jsx)(v,{login:w,errorMessage:d})}):Object(u.jsxs)("div",{children:[Object(u.jsx)(L.a,{position:"static",children:Object(u.jsxs)(P.a,{className:"navbar navbar-expand-sm",children:[Object(u.jsx)(b.a,{variant:"h6",children:"Blog App"}),Object(u.jsx)(q.a,{type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav",className:"navbar-toggler",children:Object(u.jsx)(F.a,{style:{color:"white"}})}),Object(u.jsx)("div",{className:"collapse navbar-collapse nav-container",id:"navbarNav",children:Object(u.jsxs)("ul",{className:"navbar-nav",children:[Object(u.jsx)("li",{className:"nav-item active",children:Object(u.jsx)(m.a,{className:"nav-link",color:"inherit",children:"home"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(m.a,{className:"nav-link",color:"inherit",onClick:function(){if(f)return document.getElementById("form").classList.add("hidden"),void O(!1);document.getElementById("form").classList.remove("hidden"),O(!0)},children:"create"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(m.a,{className:"nav-link",color:"inherit",children:"users"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(m.a,{className:"nav-link",color:"inherit",onClick:B,children:"logout"})})]})})]})}),Object(u.jsx)(H,{createBlog:N}),Object(u.jsx)(z,{blogs:n.sort((function(e,t){return t.likes-t.dislikes-(e.likes-e.dislikes)})),user:k,handleLogout:B,errorMessage:d,addBlog:N,updateBlog:S,removeBlog:C})]})})};n(106);c.a.render(Object(u.jsx)(G,{}),document.getElementById("root"))}},[[107,1,2]]]);
//# sourceMappingURL=main.cac55d10.chunk.js.map