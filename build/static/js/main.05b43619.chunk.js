(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{102:function(e,t,n){},103:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(11),c=n.n(a),s=n(8),o=n.n(s),i=n(13),u=n(15),l=n(3),d=function(e){var t=e.message;return null===t?null:Object(l.jsx)("h3",{className:"message error-message",children:t})},j=n(151),b=n(152),f=n(144),p=n(142),h=n(139),m=Object(h.a)({loginBtn:{marginTop:"0.8rem"}}),g=function(e){var t=e.login,n=e.errorMessage,a=Object(r.useState)("root"),c=Object(u.a)(a,2),s=c[0],h=c[1],g=Object(r.useState)("sekret"),O=Object(u.a)(g,2),v=O[0],x=O[1],k=function(){var e=Object(i.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t(s,v),h(""),x("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=m();return Object(l.jsxs)(p.a,{style:{marginTop:"15%"},alignContent:"center",direction:"column",container:!0,children:[Object(l.jsx)(f.a,{variant:"h4",component:"h2",gutterBottom:!0,children:"Login to Application"}),Object(l.jsx)(d,{message:n}),Object(l.jsxs)("form",{onSubmit:k,children:[Object(l.jsx)("div",{children:Object(l.jsx)(j.a,{label:"Username",value:s,onChange:function(e){var t=e.target;return h(t.value)}})}),Object(l.jsx)("div",{children:Object(l.jsx)(j.a,{label:"Password",type:"password",value:v,onChange:function(e){var t=e.target;return x(t.value)}})}),Object(l.jsx)(b.a,{type:"submit",className:y.loginBtn,color:"primary",children:"login"})]})]})},O=n(20),v=n.n(O),x={getUserById:function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat("/api/users","/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},k=n(146),y=n(147),w=n(145),B=n(66),S=n.n(B),C=n(65),N=n.n(C),T=Object(h.a)({gutterBottom:{marginBottom:"0.8rem"},content:{marginTop:"1.2rem",MarginBottom:"1.2rem"},links:{textDecoration:"none",color:"#636363","&:hover":{color:"black"}},smallMarginBottom:{marginBottom:"0.2rem"},deleteBtn:{marginTop:"0.6rem"}}),A=function(e){var t=e.blog,n=e.updateBlog,a=e.removeBlog,c=Object(r.useState)(!1),s=Object(u.a)(c,2),o=s[0],i=s[1],d={display:o?"":"none"},j=null,p=function(){i(!o)},h=function(){var e={user:t.user,likes:t.likes+1,dislikes:t.dislikes,author:t.author,title:t.title,url:t.url,id:t.id};n(e)},m=function(){var e={user:t.user,likes:t.likes,dislikes:t.dislikes+1,author:t.author,title:t.title,url:t.url,id:t.id};n(e)},g=function(){window.confirm("remove blog '".concat(t.title,"' by ").concat(t.author,"?"))&&a(t)};Object.keys(t).includes("user")&&(j=x.getUserById(t.user).username);var O=function(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(f.a,{variant:"h5",onClick:p,className:"blog-title",children:t.title}),Object(l.jsxs)(w.a,{children:[Object(l.jsxs)(b.a,{size:"small",onClick:h,color:"primary",children:[Object(l.jsx)(N.a,{fontSize:"small"}),t.likes]}),Object(l.jsxs)(b.a,{size:"small",onClick:m,color:"secondary",children:[Object(l.jsx)(S.a,{fontSize:"small"}),t.dislikes]})]})]})},v=function(){return Object(l.jsxs)("div",{style:d,className:B.content,children:[Object(l.jsx)(f.a,{variant:"body1",children:Object(l.jsx)("a",{href:t.url,className:(B.marginBottom,B.links),children:"read more"})}),Object(l.jsxs)(f.a,{variant:"body1",color:"textPrimary",children:["Posted by ",t.author||j]}),Object(l.jsx)(b.a,{onClick:g,color:"secondary",variant:"contained",className:B.deleteBtn,children:"delete"})]})},B=T();return Object(l.jsx)(k.a,{className:B.gutterBottom,raised:!0,children:Object(l.jsxs)(y.a,{children:[Object(l.jsx)(O,{}),Object(l.jsx)(v,{})]})})},I=function(e){var t=e.message;return null===t?null:Object(l.jsx)("h3",{className:"message success-message",children:t})},U=n(148),z=function(e){var t=e.blogs,n=e.errorMessage,r=e.updateBlog,a=e.removeBlog;return Object(l.jsxs)(U.a,{maxWidth:"md",children:[Object(l.jsx)(I,{message:n}),Object(l.jsx)("ul",{children:t.map((function(e){return Object(l.jsx)(A,{blog:e,updateBlog:r,removeBlog:a},e.id)}))})]})},M="/api/blogs",E=null,J={getAll:function(){return v.a.get(M).then((function(e){return e.data}))},setToken:function(e){E="bearer ".concat(e)},create:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:E}},e.next=3,v.a.post(M,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:E}},e.next=3,v.a.put("".concat(M,"/").concat(t.id),t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteById:function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:E}},e.next=3,v.a.delete("".concat(M,"/").concat(t),n);case 3:return r=e.sent,e.abrupt("return",r.status);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},L={login:function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},P=n(149),D=n(150),W=function(e){var t=e.createBlog,n=Object(r.useState)(""),a=Object(u.a)(n,2),c=a[0],s=a[1],d=Object(r.useState)(""),f=Object(u.a)(d,2),h=f[0],m=f[1],g=Object(r.useState)(""),O=Object(u.a)(g,2),v=O[0],x=O[1],k=function(){var e=Object(i.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t({title:c,author:h,url:v}),m(""),s(""),x("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsxs)("div",{id:"form",className:"hidden",children:[Object(l.jsx)("h2",{style:{textAlign:"center"},children:"Create New"}),Object(l.jsx)(p.a,{justify:"center",container:!0,children:Object(l.jsxs)("form",{onSubmit:k,children:[Object(l.jsx)("div",{children:Object(l.jsx)(j.a,{label:"Title",type:"text",value:c,onChange:function(e){var t=e.target;return s(t.value)}})}),Object(l.jsx)("div",{children:Object(l.jsx)(j.a,{label:"Author",type:"text",value:h,onChange:function(e){var t=e.target;return m(t.value)}})}),Object(l.jsx)("div",{children:Object(l.jsx)(j.a,{label:"Url",type:"text",value:v,onChange:function(e){var t=e.target;return x(t.value)}})}),Object(l.jsx)(b.a,{type:"submit",color:"primary",children:"create"})]})})]})},F=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(null),s=Object(u.a)(c,2),d=s[0],j=s[1],p=Object(r.useState)(!1),h=Object(u.a)(p,2),m=h[0],O=h[1],v=Object(r.useState)(null),x=Object(u.a)(v,2),k=x[0],y=x[1];Object(r.useEffect)((function(){J.getAll().then((function(e){return a(e)}))}),[]),Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogAppUser");if(e){var t=JSON.parse(e);y(t),J.setToken(t.token)}}),[]);var w=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.login({username:t,password:n});case 3:r=e.sent,window.localStorage.setItem("loggedBlogAppUser",JSON.stringify(r)),J.setToken(r.token),y(r),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),j("Wrong Username or Password"),setTimeout((function(){j(null)}),5e3);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),B=function(){y(null),J.setToken(null),window.localStorage.removeItem("loggedBlogAppUser")},S=function(){var e=Object(i.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return""===t.author&&(t.author=k.name),e.next=3,J.create(t);case 3:r=e.sent,a(n.concat(r)),j("a new blog '".concat(r.title,"' by ").concat(r.author," added")),setTimeout((function(){j(null)}),5e3);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(i.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.update(t);case 2:r=e.sent,a(n.filter((function(e){return e.id!==t.id})).concat(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(t.id),e.next=4,J.deleteById(t.id);case 4:a(n.filter((function(e){return e.id!==t.id}))),j("blog '".concat(t.title,"' was removed")),setTimeout((function(){j(null)}),5e3),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),j("failed to delete blog '".concat(t.title,"'")),setTimeout((function(){j(null)}),5e3);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(l.jsx)("div",{children:null===k?Object(l.jsx)("div",{children:Object(l.jsx)(g,{login:w,errorMessage:d})}):Object(l.jsxs)("div",{children:[Object(l.jsx)(P.a,{position:"static",children:Object(l.jsxs)(D.a,{className:"menu-container",children:[Object(l.jsx)(f.a,{variant:"h6",children:"Blog App"}),Object(l.jsxs)("div",{children:[Object(l.jsx)(b.a,{color:"inherit",children:"home"}),Object(l.jsx)(b.a,{color:"inherit",onClick:function(){if(m)return document.getElementById("form").classList.add("hidden"),void O(!1);document.getElementById("form").classList.remove("hidden"),O(!0)},children:"create"}),Object(l.jsx)(b.a,{color:"inherit",children:"users"})]}),Object(l.jsx)(b.a,{color:"inherit",onClick:B,children:"logout"})]})}),Object(l.jsx)(W,{createBlog:S}),Object(l.jsx)(z,{blogs:n.sort((function(e,t){return t.likes-t.dislikes-(e.likes-e.dislikes)})),user:k,handleLogout:B,errorMessage:d,addBlog:S,updateBlog:C,removeBlog:N})]})})};n(102);c.a.render(Object(l.jsx)(F,{}),document.getElementById("root"))}},[[103,1,2]]]);
//# sourceMappingURL=main.05b43619.chunk.js.map